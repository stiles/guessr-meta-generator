<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ country.name }}</title>
    <link rel="stylesheet" href="../static/style.css">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.css" rel="stylesheet" />
    <link rel="icon" href="../static/favicon.ico">
</head>
<body>
    <!-- Top Navbar -->
    <div class="topnav">
        <a href="/index.html">Home</a>
        <a href="/quiz.html">Map quiz</a>
        <a href="/flags.html">Flashcards</a>
        <a href="https://github.com/stiles/guessr-meta-generator/blob/main/README.md">About</a>
    </div>

    <!-- Header Section -->
    <header class="country-header">
        <div class="header-content">
            <h1 class="main-title">{{ country.name }} ({{ country.geoguessr_clues['Identity & symbols']['tld'] }})</h1>
            <img src="../static/flags/{{ country.code }}.png" alt="{{ country.name }} flag" class="header-flag">
        </div>
    </header>

    <!-- Breadcrumb Navigation -->
    <nav class="breadcrumb">
        <a href="../index.html">Home</a> > 
        <a href="/{{ country.region | slugify }}/index.html">{{ country.region }}</a> > 
        {% if country['sub-region'] %}
        <a href="/{{ country.region | slugify }}/{{ country['sub-region'] | slugify }}/index.html">{{ country['sub-region'] }}</a> >
        {% else %}
        <span>Uncategorized</span> >
        {% endif %}
        <span>{{ country.name }}</span>
    </nav>

    <!-- Main Content -->
    <main>
        <!-- Flex container for map and clues -->
        <div class="content-container">
            <!-- Country Map Section -->
            <section class="map-section">
                <div id="country-map"
                     class="country-map mapboxgl-map"
                     data-lat="{{ country.lat }}"
                     data-lon="{{ country.lon }}"
                     data-name="{{ country.name | slugify }}">
                </div>
            </section>

            <!-- Clues Section -->
            {% if country.geoguessr_clues %}
            <section class="clues-section">
                <h2>Clues</h2>
                <p class="subhead">Use these details to boost your ability to identify specific countries in the game.</p>
                {% for category, clues in country.geoguessr_clues.items()  %}
                <div class="category-section">
                    <h3 class="category-title">{{ category }}</h3>
                    <div class="clues-grid">
                        {% for key, value in clues.items() if key not in ["flag", "tld", 'capital_status'] %}
                        <div class="clues-item">
                            <h4>{{ key | capitalize }}</h4>
                            <p class="clues-item-text">{{ value }}</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
                <div class="notes">
                    <p class="disclaimer">This content was <a href="https://github.com/stiles/guessr-meta-generator/blob/main/scripts/fetch_world_meta_ai.py">derived</a> using OpenAI's <span class="code">gpt-4o-mini</span> model. Spot an error? <a href="mailto:mattstiles@gmail.com">Holler</a>. </p>
                </div>
            </section>
            {% else %}
            <p>No GeoGuessr clues available for this country.</p>
            {% endif %}
        </div>
    </main>

    <!-- Footer Section -->
    <footer>
        <p class="credits">Made by <a href="https://mattstiles.me">Matt Stiles</a> with <a href="https://github.com/datadesk/LA Times -example-page-template?tab=readme-ov-file">LA Times Baker</a>. Flag images via <a href="https://flagpedia.net/">Flagpedia</a>.</p>
    </footer>

    <!-- Scripts -->
    <script src="../static/script.js"></script>
</body>
</html>
